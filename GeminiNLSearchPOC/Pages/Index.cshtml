@page
@model IndexModel
@{
    ViewData["Title"] = "Gemini NL Search";
}

<div style="max-width: 800px; margin: 20px auto; padding: 20px; font-family: Arial, sans-serif;">
    <h2 style="color: #333;">Gemini AI Natural Language Search</h2>
    <p style="color: #666;">Enter natural language queries to search documents</p>
    
    <form method="post" style="margin: 20px 0;">
        <div style="display: flex; gap: 10px;">
            <input type="text" name="query" placeholder="Try: 'Show me all records from November 2025'" 
                   style="flex: 1; padding: 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 16px;" />
            <button type="submit" style="padding: 12px 24px; background: #4285f4; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px;">
                Search with AI
            </button>
        </div>
    </form>

    @if (!string.IsNullOrEmpty(Model.Message))
    {
        <div style="padding: 15px; background: #e8f0fe; border-radius: 4px; margin: 15px 0; border-left: 4px solid #4285f4;">
            <strong>@Model.Message</strong>
        </div>
    }

    @if (!string.IsNullOrEmpty(Model.SqlQuery))
    {
        <div style="padding: 15px; background: #f1f8e9; border-radius: 4px; margin: 15px 0; border-left: 4px solid #7cb342;">
            <strong>Generated SQL:</strong> @Model.SqlQuery
        </div>
    }

    <div style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse; margin-top: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
            <thead>
                <tr style="background: #f5f5f5;">
                    <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">ID</th>
                    <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Title</th>
                    <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Officer</th>
                    <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Date</th>
                    <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">File</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var doc in Model.Documents)
                {
                    <tr style="background: white;">
                        <td style="border: 1px solid #ddd; padding: 12px;">@doc.Id</td>
                        <td style="border: 1px solid #ddd; padding: 12px;">@doc.Title</td>
                        <td style="border: 1px solid #ddd; padding: 12px;">@doc.EscrowOfficer</td>
                        <td style="border: 1px solid #ddd; padding: 12px;">@doc.CreatedDate.ToString("yyyy-MM-dd")</td>
                        <td style="border: 1px solid #ddd; padding: 12px;">@doc.FileName</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>